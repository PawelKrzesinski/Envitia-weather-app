<div class="w-11 mx-auto my-8">
  <p-tabView (onChange)="dayChangeHandler($event)" class="">
    <p-tabPanel *ngFor="let day of days" [header]="dailyWeatherData.time[day]">
        <p-fieldset [legend]="timezone" class="w-full h-35rem flex">
          <!-- INPUT FIELDS -->
          <form [formGroup]="locationForm" (submit)="getWeatherByLonLat()">
            <span class="p-float-label my-4">
              <input type="number" id="lon" class="p-inputtext-sm" pInputText formControlName="lon"/>  
              <label htmlFor="lon">Longitude*</label>
              <div *ngIf="lon?.invalid && (lon?.dirty || lon?.touched)">
                <div *ngIf="lon?.errors?.['required']">Longitude is required.</div>
                <div *ngIf="lon?.errors?.['pattern']">Longitude must be a number between -180 and 180. Two decimal places allowed.</div>
              </div>
            </span>
            <span class="p-float-label my-2">
              <input type="number" id="lat" class="p-inputtext-sm" pInputText formControlName="lat"/>  
              <label htmlFor="lat">Latitude*</label>
              <div *ngIf="lat?.invalid && (lat?.dirty || lat?.touched)">
                <div *ngIf="lat?.errors?.['required']">Latitude is required.</div>
                <div *ngIf="lat?.errors?.['pattern']">Latitude must be a number between -90 and 90. Two decimal places allowed.</div>
              </div>
            </span>
            <p-button (onClick)="getWeatherByLonLat()" type="submit" [disabled]="locationForm.invalid">Search</p-button>
          </form>
          <!-- MAIN INFO -->
          <div class="daily-weather-card-inner font-light">
            <div class="flex ml-4">
              <h2 *ngIf="activeIndex === 0">Temperature: {{ currentWeatherData.temperature }}&deg;C</h2>
              <p-avatar size="xlarge" [style]="{ 'background-color': '#A4E3F9' }" class="mx-4">
                <img [src]='fetchWeatherIcon(currentWeatherData.weathercode)'>
              </p-avatar>
            </div>
            <div class="flex w-full justify-content-around">
              <div class="flex align-items-center">
                <img src="../../assets/icons/thermometer.svg" class="weather-icons">
                <h3 class="ml-1">Feels Like: {{ currentHourly.feels_like }}&deg;C</h3>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/thermometer_min.svg" class="weather-icons mr-2">
                <h3 class="mx-1">Min: {{dailyWeatherData.temperature_2m_min[day]}}&deg;C</h3>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/thermometer_max.svg" class="weather-icons mr-2">
                <h3 class="mx-1">Max: {{dailyWeatherData.temperature_2m_max[day]}}&deg;C</h3>  
              </div>

            </div>
            <div class="flex w-full justify-content-around">
              <div class="flex align-items-center">
                <img src="../../assets/icons/arrow_up.svg" class="weather-icons-up">
                <img src="../../assets/icons/sunset.svg" class="weather-icons">
                <h3 class="mx-2">Sunrise: {{dailyWeatherData.sunrise[day]}}</h3>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/sunset.svg" class="weather-icons">
                <img src="../../assets/icons/arrow_down.svg" class="weather-icons-down">
                <h3 class="mx-2">Sunset: {{dailyWeatherData.sunset[day]}}</h3>
              </div>
            </div>
          </div>
          <!-- EXTRA INFO CARD -->
          <p-card class="no-header-card extra-info">
            <div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/rain.svg" class="weather-icons">
                <p class="ml-2">Precipitation: {{ currentHourly.precipitation}}%</p>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/gauge.svg" class="weather-icons">
                <p class="ml-2">Pressure: {{ currentHourly.pressure }}hPa</p>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/arrow_up.svg" class="weather-icons" [ngStyle]="{ transform: 'rotate(' + currentHourly.wind_direction + 'deg)' }">
                <p class="ml-2">Wind speed: {{ currentHourly.windspeed }}km/h</p>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/visibility.svg" class="weather-icons" >
                <p class="ml-2">Visibility: {{ currentHourly.visibility }}m</p>
              </div>
            </div>
            <div class="flex flex-column justify-content-center ml-4">
              <div class="flex align-items-center">
                <img src="../../assets/icons/rain_l.svg" class="weather-icons">
                <p class="ml-2">Chance of rain: {{ currentHourly.rain ? 'Yes' : 'No' }}</p>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/rain_h.svg" class="weather-icons">
                <p class="ml-2">Chance of showers: {{ currentHourly.showers ? 'Yes' : 'No' }}</p>
              </div>
              <div class="flex align-items-center">
                <img src="../../assets/icons/snow.svg" class="weather-icons">
                <p class="ml-2">Chance of snow: {{ currentHourly.snowfall ? 'Yes' : 'No' }}</p>
              </div>
            </div>
            
          </p-card>
        </p-fieldset>
    </p-tabPanel>
  </p-tabView>
</div>
<!-- HOURLY INFO CAROUSELS -->
<div [ngSwitch]="selectedDay">
  <p-carousel *ngSwitchCase="hourlyWeatherData[0]" [value]="hours" [numVisible]="6" [numScroll]="6" [circular]="true" [responsiveOptions]="responsiveOptions">
    <ng-template let-hour pTemplate="body">
      <p-card class="no-header-card border-noround bg-white">
        <h3>{{hour}}</h3>
        <div class="flex align-items-center">
          <img src="../../assets/icons/thermometer.svg" class="weather-icons">
          <p class="ml-1">Temp/Feels: {{ hourlyWeatherData[0].temperature_2m[hour] }}&deg;C/{{ hourlyWeatherData[0].apparent_temperature[hour] }}&deg;C</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/rain.svg" class="weather-icons">
          <p class="ml-1">Precipitation: {{ hourlyWeatherData[0].precipitation_probability[hour]}}%</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/gauge.svg" class="weather-icons">
          <p class="ml-1">Pressure: {{ hourlyWeatherData[0].surface_pressure[hour] }}hPa</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/wind.svg" class="weather-icons">
          <p class="ml-1">Wind speed: {{ hourlyWeatherData[0].windspeed_10m[hour] }}km/h</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/visibility.svg" class="weather-icons">
          <p class="ml-1">Visibility: {{ hourlyWeatherData[0].visibility[hour] }}m</p>
        </div>
      </p-card>
    </ng-template>
  </p-carousel>
  <p-carousel *ngSwitchCase="hourlyWeatherData[1]" [value]="hours" [numVisible]="6" [numScroll]="6" [circular]="true" [responsiveOptions]="responsiveOptions">
    <ng-template let-hour pTemplate="body">
      <p-card class="no-header-card border-noround bg-white">
        <h3>{{hour}}</h3>
        <div class="flex align-items-center">
          <img src="../../assets/icons/thermometer.svg" class="weather-icons">
          <p class="ml-1">Temp/Feels: {{ hourlyWeatherData[1].temperature_2m[hour] }}&deg;C/{{ hourlyWeatherData[1].apparent_temperature[hour] }}&deg;C</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/rain.svg" class="weather-icons">
          <p class="ml-1">Precipitation: {{ hourlyWeatherData[1].precipitation_probability[hour]}}%</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/gauge.svg" class="weather-icons">
          <p class="ml-1">Pressure: {{ hourlyWeatherData[1].surface_pressure[hour] }}hPa</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/wind.svg" class="weather-icons">
          <p class="ml-1">Wind speed: {{ hourlyWeatherData[1].windspeed_10m[hour] }}km/h</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/visibility.svg" class="weather-icons">
          <p class="ml-1">Visibility: {{ hourlyWeatherData[1].visibility[hour] }}m</p>
        </div>
      </p-card>
    </ng-template>
  </p-carousel>
  <p-carousel *ngSwitchCase="hourlyWeatherData[2]" [value]="hours" [numVisible]="6" [numScroll]="6" [circular]="true" [responsiveOptions]="responsiveOptions">
    <ng-template let-hour pTemplate="body">
      <p-card class="no-header-card border-noround bg-white">
        <h3>{{hour}}</h3>
        <div class="flex align-items-center">
          <img src="../../assets/icons/thermometer.svg" class="weather-icons">
          <p class="ml-1">Temp/Feels: {{ hourlyWeatherData[2].temperature_2m[hour] }}&deg;C/{{ hourlyWeatherData[2].apparent_temperature[hour] }}&deg;C</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/rain.svg" class="weather-icons">
          <p class="ml-1">Precipitation: {{ hourlyWeatherData[2].precipitation_probability[hour]}}%</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/gauge.svg" class="weather-icons">
          <p class="ml-1">Pressure: {{ hourlyWeatherData[2].surface_pressure[hour] }}hPa</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/wind.svg" class="weather-icons">
          <p class="ml-1">Wind speed: {{ hourlyWeatherData[2].windspeed_10m[hour] }}km/h</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/visibility.svg" class="weather-icons">
          <p class="ml-1">Visibility: {{ hourlyWeatherData[2].visibility[hour] }}m</p>
        </div>
      </p-card>
    </ng-template>
  </p-carousel>
  <p-carousel *ngSwitchCase="hourlyWeatherData[3]" [value]="hours" [numVisible]="6" [numScroll]="6" [circular]="true" [responsiveOptions]="responsiveOptions">
    <ng-template let-hour pTemplate="body">
      <p-card class="no-header-card border-noround bg-white">
        <h3>{{hour}}</h3>
        <div class="flex align-items-center">
          <img src="../../assets/icons/thermometer.svg" class="weather-icons">
          <p class="ml-1">Temp/Feels: {{ hourlyWeatherData[3].temperature_2m[hour] }}&deg;C/{{ hourlyWeatherData[3].apparent_temperature[hour] }}&deg;C</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/rain.svg" class="weather-icons">
          <p class="ml-1">Precipitation: {{ hourlyWeatherData[3].precipitation_probability[hour]}}%</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/gauge.svg" class="weather-icons">
          <p class="ml-1">Pressure: {{ hourlyWeatherData[3].surface_pressure[hour] }}hPa</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/wind.svg" class="weather-icons">
          <p class="ml-1">Wind speed: {{ hourlyWeatherData[3].windspeed_10m[hour] }}km/h</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/visibility.svg" class="weather-icons">
          <p class="ml-1">Visibility: {{ hourlyWeatherData[3].visibility[hour] }}m</p>
        </div>
      </p-card>
    </ng-template>
  </p-carousel>
  <p-carousel *ngSwitchCase="hourlyWeatherData[4]" [value]="hours" [numVisible]="6" [numScroll]="6" [circular]="true" [responsiveOptions]="responsiveOptions">
    <ng-template let-hour pTemplate="body">
      <p-card class="no-header-card border-noround bg-white">
        <h3>{{hour}}</h3>
        <div class="flex align-items-center">
          <img src="../../assets/icons/thermometer.svg" class="weather-icons">
          <p class="ml-1">Temp/Feels: {{ hourlyWeatherData[4].temperature_2m[hour] }}&deg;C/{{ hourlyWeatherData[4].apparent_temperature[hour] }}&deg;C</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/rain.svg" class="weather-icons">
          <p class="ml-1">Precipitation: {{ hourlyWeatherData[4].precipitation_probability[hour]}}%</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/gauge.svg" class="weather-icons">
          <p class="ml-1">Pressure: {{ hourlyWeatherData[4].surface_pressure[hour] }}hPa</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/wind.svg" class="weather-icons">
          <p class="ml-1">Wind speed: {{ hourlyWeatherData[4].windspeed_10m[hour] }}km/h</p>
        </div>
        <div class="flex align-items-center">
          <img src="../../assets/icons/visibility.svg" class="weather-icons">
          <p class="ml-1">Visibility: {{ hourlyWeatherData[4].visibility[hour] }}m</p>
        </div>
      </p-card>
    </ng-template>
  </p-carousel>
  
</div>